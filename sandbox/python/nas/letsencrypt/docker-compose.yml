version: '3.8'

services:
  acme:
    image: neilpang/acme.sh:latest
    container_name: letsencrypt-acme
    restart: unless-stopped
    environment:
      - CF_Token=${CF_TOKEN}
      - CF_Account_ID=${CF_ACCOUNT_ID}
      - CF_Zone_ID=${CF_ZONE_ID}
      # Alternative: use CF_Email and CF_Key for Global API Key
      # - CF_Email=${CF_EMAIL}
      # - CF_Key=${CF_KEY}
    volumes:
      - ${CERT_PATH}:/acme.sh
      - ${OUTPUT_PATH}:/certs
      # Mount Synology certificate folder for direct updates
      - /usr/syno/etc/certificate:/usr/syno/etc/certificate
      # Mount scripts directory
      - ./:/synology-scripts:ro
    network_mode: bridge
    command: daemon
